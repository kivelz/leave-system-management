<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head lang="en">
<title>All Employee</title>
<th:block th:include="layout/header"></th:block>
</head>

<div th:if="${message}" th:text="${message}"
	th:class="${'alert ' + alertClass}" id="successMessage"
	style="text-align: center" /></div>
<div class="container">
	<div th:if="${not #lists.isEmpty(employees)}">
		<h2>All Employee</h2>
		<table class="table table-striped">
			<tr>
				<th>Id</th>
				<th>Name</th>
				<th>Email</th>
				<th>User ID</th>
				<th>Roles</th>
				<th>Manger name</th>
				<th>Modify</th>
			</tr>
			<tr th:each="employee : ${employees}">
				<td th:text="${employee.id}"></td>
				<td th:text="${employee.name}">Name</td>
				<td th:text="${employee.email}">Email</td>
				<td th:text=${employee.userid}>UserID</td>
				<td th:text=*{employee.role.title}></td>
				<td
					th:if="${#maps.containsKey(employeesManagers, __${employee.managerid}__)}"
					th:text="${employeesManagers[__${employee.managerid}__].name}">Nothing
					here</td>
				<td
					th:unless="${#maps.containsKey(employeesManagers, __${employee.managerid}__)}">Not
					assigned</td>
				<td><a th:href="${'update/' + employee.id}"
					class="btn btn-primary">Edit</a>
					<button type="button" class="btn btn-danger" data-toggle="modal"
						data-target="#modal-warning"
						th:attr="data-target='#modal-warning'+${employee.id }">
						Delete Employee</button></td>

					<div class="modal modal-warning fade in" th:id="modal-warning+${employee.id }">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal"
									aria-label="Close">
								</button>
								<h5 class="modal-title"> <i class="fas fa-trash-alt" style="color:red"></i>Delete User</h5>
							</div>
							<div class="modal-body">
								<h3>Are you sure want to delete this Employee?</h3>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-outline pull-left"
									data-dismiss="modal">Close</button>
								<a type="button" class="btn btn-danger"
									th:href="${'delete/' + employee.id}"><i class="fas fa-trash-alt"></i>&nbsp;Yes</a>
							</div>
						</div>
					</div>
				</div>
				</tr>
		</table>

	</div>

	<br> <br>
</div>
</body>
</html>